<div class="spendings-history">
    
    <pgz-filter-wrapper 
        [items]="categoriesForFilter"
        [selectedIds]="selectedCategoriesSet"
        (selectedIdsChange)="updateSelectedCategories($event)"
        [contentTemplate]="statisticTemplate">
        <a href="spending/calendar" class="spendings-history--calendar">
            <pgz-icon [name]="'custom_calendar'"></pgz-icon>
        </a>
    </pgz-filter-wrapper>

    <ng-template #statisticTemplate>
        <section class="spendings-history--list">
            @for(dateSpending of spendingsGroupedByDate.keys(); track dateSpending) {
                <p class="spendings-history--list-item">{{ dateSpending }}</p>

                @for(spending of spendingsGroupedByDate.get(dateSpending); track spending) {
                    <pgz-history-spending-card  [spending]="spending"></pgz-history-spending-card>
                }
            }

            @if(spendingsGroupedByDate.size === 0) {
                <p>Empty list</p>
            }
        </section>
    </ng-template>
</div>