<main class="scroll-list">
  <button class="chart-container--btn btn" (click)="toggleChart()">{{chartType}}</button>
  <div class="chart-container--chart">
    <pgz-range-controller (rangeChange)="onRangeChange($event)"></pgz-range-controller>
    @if(chartType === 'pie') { 
      <pgz-pie-chart-container [categoryData]="categoryStatisticForPeriod" [isCompareEnabled]="isCompareEnabled" [compareCategoryData]="compareCategoryStatisticForChart"></pgz-pie-chart-container>
    }

    @if(chartType === 'multiline') {
      <pgz-multi-line-chart-container 
        [activeCategories]="categoryStatisticForPeriod" 
        [isCompareEnabled]="isCompareEnabled"
        [spendings]="spendingsForMultiLineChart"
        [compareSpendings]="compareSpendingsForMultiLineChart"
      ></pgz-multi-line-chart-container>
    }
  </div>

  <section>
    <div class="d-flex justify-content-between">
      <button class="btn" (click)="changeSortBy()">
        @if(isAscSort){
          <pgz-icon [name]="'arrow_drop_up'"></pgz-icon>
        } @else {
          <pgz-icon [name]="'arrow_drop_down'"></pgz-icon>
        }
      </button>

      <button class="btn d-flex" (click)="allCategoriesVisible()">
        All visible
        <pgz-icon [name]="'visibility'"></pgz-icon>
      </button>
    </div>

    @for(data of categoryStatisticForPeriod; track data) {
      <pgz-spending-statistic-card [data]="data" [isVisible]="isVisibleCategory(data.category)" (clickCard)="onCardClick($event)" (toggleCategory)="toggleCategory($event)">
      </pgz-spending-statistic-card>
    } @empty {
      <p style="text-align: center;">You don't have any spendings</p>
    }
  </section>
</main>
